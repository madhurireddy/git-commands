<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Git Commands">
<meta name="keywords" content="git, rebase, patch">
<meta name="author" content="Madhuri Devidi">
<title>Git Commands</title>
<link rel="stylesheet" type="text/css" href="styles/git-stylesheet.css">
</head>

<body>
<h1>Git Practice and Commands</h1>


<nav>
  <li><a href="#github">Github Repo</a></li>
  <li><a href="#project-level-configs">Project level configs</a></li>
  <li><a href="#create-repo">Create a new repository</a></li>
  <li><a href="#record-changes">Record changes to repository</a></li>
  <li><a href="#auto-completion">Auto Completion</a></li>
  <li><a href="#git-diff">Git Diff</a></li>
  <li><a href="#git-aliases">Git Aliases</a></li>
  <li><a href="#git-head">Git HEAD</a></li>
  <li><a href="#git-log">Git Log</a></li>
  <li><a href="#git-merge">Git Merge</a></li>
  <li><a href="#git-show">Git Show</a></li>
  <li><a href="#git-amend">Git Amend</a></li>
  <li><a href="#git-revert">Git Revert</a></li>
  <li><a href="#git-reset">Git Reset</a></li>
  <li><a href="#git-rebase">Git Rebase</a></li>
  <li><a href="#git-stash">Git Stash</a></li>
  <li><a href="#git-patch">Git Patch</a></li>
  <li><a href="#git-cherry-pick">Git Cherry Pick</a></li>
  <li><a href="#merge-diff-tool">Merge/Diff tool</a></li>
</nav>
  
<div id="github"><h3>Github Repo</h3></div>
<pre>Go to github.com and create an account. It is free.
Create a repo called git-commands. 
Then from your computer, <a href="http://git-scm.com/downloads">download and install git</a>. 
Create a directory with the name you used for repo name.
Set configs as shown below. These will be specific to a single repository.</pre>
  
<div id="project-level-configs"><h3>Project level configs</h3></div>

<h4><pre>$ git init
$ git config user.name "somebody"
$ git config user.email somebody@somebody.com</pre></h4>
  
<p>Local config will be in your repository's .git/config file. Global will be in ~/.gitconfig</p>
<p><img src="images/git-project-configs.png" alt="Git configs - project level"></p>
  

<div id="create-repo"><h3>Create a new repository</h3></div>
  
<pre>
From command line cd into the directory and do the following:
 
echo "# comments" >> README.md
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/USERNAME/git-commands.git
git push -u origin master
</pre>
  
<div id="record-changes"><h3>Record changes to repository</h3></div>
<p>
As you edit files, Git sees them as modified, because you’ve changed them since your last commit. You stage these modified files and then commit all your staged changes, and the cycle repeats.
</p>
<div class="image_container"><img src="images/three-tier-architecture.png" alt="three tier architecture"></div>
  
<div id="auto-completion"><h3>Auto Completion</h3></div>
<p>
To add git auto completion do the following steps.
</p>
<h4>$ cd ~<br>
$ curl -OL https://github.com/git/git/raw/master/contrib/completion/git-completion.bash</h4>
<p>
Add the following to your .bash_profile and source it.
</p>
<pre>
if [ -f ~/.git-completion.bash ]; then
  source ~/.git-completion.bash
fi
</pre>
<div id="git-diff"><h3>Git Diff</h3></div>
<p>git diff below diffs origin and local</p>
<p><img src="images/diff-origin-master.png" alt="diff with origin/master"></p>
  
<p>If we want to diff the changes to a file in a branch to the file in master branch:</p>
<p>04:16 PM /Users/madhuridevidi/html5/foundations/git-commands gh-pages</p>
<h4>$ git diff master -- index.html</h4>

<h4><pre>$ git diff
Show differences between your working directory and the staging index.

$ git diff –staged
Show differences between the index and the most recent commit.

$ git diff HEAD
Show the differences between your working directory and the most recent commit.</pre></h4>
  
<div id="git-aliases"><h3>Git Aliases</h3></div>

<h4><pre>$ git config --global alias.logline "log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"</pre>
  
<pre>$ git config --global alias.slog "log --pretty=oneline --abbrev-commit"</pre>
<pre>$ git slog</pre></h4>
<pre>1fa0979 HEAD pointer
982a86b added p tag
a2e83d8 added p tag</pre>

<div id="git-head"><h3>Git HEAD</h3></div>

<p>cat .git/HEAD</p>
<p>cat .git/refs/heads/master</p>
<p><img src="images/logline-head.png" alt="HEAD"></p>
  
<div id="git-log"><h3>Git Log</h3></div>
<p>git log shows recent two logs</p>
<h4>
  <pre>$ git log --pretty="%h - %s" --author=Madhuri --since="2015-11-01"  -2</pre>
  <pre>$ git log --pretty=format:"%h - %an, %ar : %s" -2</pre>
</h4>
<p><img src="images/git-log-2.png" alt="git log"></p>
  
<h4>
  <pre>git log --pretty=format:"%h %ad | %s%d [%an]" --graph --date=short</pre>
  <pre>git log --graph --oneline --decorate --date=relative --all</pre>
</h4>
  
  
<div id="git-merge"><h3>Git Merge</h3></div>
<p>Whenever you merge checkout the branch you want the changes to be merged into</p>
<p><img src="images/merge-no-conflict.png" alt="merge no conflict"></p>
<p><img src="images/merge.png" alt="merge"></p>
<p><img src="images/merge-conflict.png" alt="merge conflict"></p>
<p><img src="images/merge-graph.png" alt="merge graph"></p>
<p><img src="images/merge_graph_good.png" alt="merge graph"></p>
<p><img src="images/colorful-merge-graph.png" alt="colorful merge graph"></p>
<p><img src="images/merge-graph-2.png" alt="colorful merge graph 2"></p>
  
<div id="git-show"><h3>Git Show</h3></div>
<p>Shows changes</p> 
<h4>
  <pre>$ git show --pretty="format:" --name-only bd61ad98</pre>
  <pre>$ git show --pretty="format:" b8386ca443..cd04d9e530</pre>
</h4>
<p><img src="images/git-show.png" alt="git show"></p>
 
  <div id="git-amend"><h3>Git Amend</h3></div>
<p><img src="images/git-amend.png" alt="git amend"></p>

<p>Also, if you commit and then realize you forgot to stage the changes in a file you wanted to add to this commit, you can do something like this:<p>

<pre>$ git commit -m 'initial commit'
$ git add forgotten_file
$ git commit --amend</pre>
  
<div id="git-revert"><h3>Git Revert</h3></div>
<h4>
  <pre>$ git revert HEAD</pre>
  <pre>$ git revert cd04d9e530</pre>
  <pre>$ git revert HEAD --no-edit</pre>
</h4>
<p><img src="images/git-revert.png" alt="git revert"></p>
  
<p>Since we were undoing the very last commit we made, we were able to use HEAD as the argument to revert. We can revert any arbitrary commit earlier in history by simply specifying its hash value.</p>
  
<div id="git-reset"><h3>Git Reset</h3></div>
<pre>git reset
--soft - does not change the staging index or the working copy, only changes the repo, most recent changes are in staging and working copy
--mixed(default) - repo and staging index only
--hard - changes the repo, cages the staging index and working copy</pre>
  
<p><img src="images/git-reset-soft.png" alt="git revert"></p>
<p><img src="images/git-reset-hard.png" alt="git revert"></p>
  
<div id="git-rebase"><h3>Git Rebase</h3></div>
<p>The primary reason for rebasing is to maintain a linear project history.</p>
<p>There are two options for integrating a feature into the master branch: merging directly or rebasing and then merging. The former option results in a 3-way merge and a merge commit, while the latter results in a fast-forward merge and a perfectly linear history.</p>
<p>It is also used to squash commits, split commits, change commit message or add/remove files in commit, switch the order of commits</p>  

  
<h4><pre>Assume the following history exists and the current branch is "topic":

          A---B---C topic
         /
    D---E---F---G master
From this point, the result of either of the following commands:

$ git rebase master
$ git rebase master topic
would be:

                  A'--B'--C' topic
                 /
    D---E---F---G master
    
</pre></h4>
  
<p><img src="images/git-rebase.png" alt="git rebase"></p>


  
  
<div id="git-cherry-pick"><h3>Git Cherry-Pick</h3></div>
<p>Git cherry-pick behaves just like merge. If git can’t apply the changes (e.g. you get merge conflicts), git leaves you to resolve the conflicts manually and make the commit yourself.</p>
<p><img src="images/git-cherry-pick1.png" alt="git cherry pick 1"></p>
<p><img src="images/git-cherry-pick2.png" alt="git cherry pick 2"></p>
 
<div id="git-stash"><h3>Git Stash</h3></div>
<h4>
  <pre>$ git stash save "comment"</pre>
  <pre>$ git stash list</pre>
  <pre>$ git stash pop</pre>
  <pre>$ git stash apply stash@{1}</pre>
  <pre>$ git stash drop stash@{1}</pre>
</h4>
<p><img src="images/git-stash.png" alt="git stash"></p>

  
<div id="git-patch"><h3>Git Patch</h3></div>
<p>To create a patch from the last two commits in one branch(master) and correctly apply this patch to another(gh-pages) repository, do the following:</p>
  
<h4>
  <pre>$ $ git format-patch gh-pages --stdout > fix-three-tier-image-style.patch</pre>
  <pre>$ git apply --stat fix-three-tier-image-style.patch</pre>
  <pre>$ git apply --check fix-three-tier-image-style.patch</pre>
</h4>

<p><img src="images/git-patch-1.png" alt="git patch 1"></p>
<p><img src="images/git-patch-2.png" alt="git patch 2"></p>
<p><img src="images/git-patch-3.png" alt="git patch 3"></p>
<p><img src="images/git-patch-4.png" alt="git patch 4"></p>
  
  
  
<div id="merge-diff-tool"><h3>Merge/Diff tool</h3></div>

  
<p><img src="images/difftool-mergetool.png" alt="difftool mergetool"></p>

<h4>
  <pre>comparing branches/sha1s content: $ git difftool A..B [<path>...]
resolving merge conflicts: $ git mergetool [<path>...]</pre>
</h4>

<h4>
  <pre>$ git difftool</pre>
</h4>
<p><div class="image_container1"><img src="images/p4merge.png" alt="p4merge"></div></p>
<h4>
  <pre>$ git mergetool</pre>
</h4>
<pre>4-pane merge tools show you these panes:

LOCAL – your file with the changes you’ve made to it
BASE – the common ancestor file that LOCAL and REMOTE came from
REMOTE – the file you’re merging in, possibly authored by someone else
MERGE_RESULT – the file resulting from the merge where you resolve conflicts</pre>
  

<p>This will open P4Merge and show three different versions of the file; your local version, the version you are trying to merge in (probably the master branch) and the base version. The base version is the common ancestor of the local version and the remote version.</p> 
<p><div class="image_container1"><img src="images/3way-merge.png" alt="3 way merge"></div></p>

  
</body>

</html>

